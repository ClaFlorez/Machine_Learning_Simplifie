# 🔎 5.3 – Détection de patterns et anomalies
**Module 5 • Chapitre 3 • Niveau : Débutant • Durée : ~35–40 min**

> *Chasse aux patterns cachés — Identifiez les structures récurrentes et les valeurs anormales qui racontent une histoire.*

---

## 🎯 Objectifs d’apprentissage
- Repérer des **patterns visuels** (tendances, saisonnalités, clusters…)
- Appliquer des **méthodes de détection d’anomalies** (IQR, Z-score)
- Utiliser le **clustering** pour révéler des structures
- Analyser des **séries temporelles** (décomposition & anomalies)
- Employer des **visualisations avancées** pour le diagnostic

---

## 🧩 Qu’est-ce qu’un pattern ?
Un **pattern** (motif) est une **régularité** dans les données (forme, rythme, relation).

> *“Les patterns sont partout – il suffit de savoir où regarder.”*

**Types de patterns**
- **Temporels** : tendance, saisonnalité, cycles
- **Spatiaux** : regroupements géographiques
- **Corrélations** : relations entre variables
- **Clusters** : groupes naturels
- **Séquences** : ordres récurrents (par ex. étapes d’un funnel)

---

## 🗂️ Tableau de bord (vue synthétique)

### KPIs (à adapter à votre cas)
- **% d’anomalies détectées** : `…`
- **Nb de clusters** : `…`
- **RMSE forecast** (si série temporelle) : `…`
- **Corrélation max / min** : `… / …`

### Panneaux
- 🧭 **Patterns clés** : tendance ↑/↓, saisonnalité (hebdo/mensuelle), segments saillants
- 🚨 **Alertes** : pics/sous-performances, ruptures de tendance
- 🧪 **Hypothèses** : causes possibles, variables candidates
- ✅ **Actions** : nettoyage, features, tests A/B, retrain

---


## 📊 1) Détection d’anomalies – IQR & Z-score

### Méthode IQR (Interquartile Range)
**Principe** : une observation est anormale si elle est en dehors de  
`[Q1 − 1.5×IQR ; Q3 + 1.5×IQR]` (où `IQR = Q3 − Q1`).

# 🚨 Détection d’anomalies avec la méthode IQR (Interquartile Range)

![Méthode IQR](image/Methode-IQR-Interquartile-Range.JPG)

## 📊 Interprétation du graphique
- **À gauche (Boxplot)**  
  - La boîte représente 50 % des données (entre Q1 et Q3).  
  - La ligne centrale = **médiane**.  
  - Les moustaches = étendue normale des valeurs (Q1 − 1.5×IQR ; Q3 + 1.5×IQR).  
  - Les points rouges en dehors = **anomalies détectées**.

- **À droite (Histogramme avec seuils)**  
  - Distribution globale des valeurs.  
  - Les lignes rouges pointillées = **seuils de détection** (59.1 et 140.9).  
  - Les points situés en dehors de cet intervalle sont considérés comme des **outliers**.

---

## 📑 Résultats de l’analyse
- **Anomalies réelles** : 50  
- **Anomalies détectées** : 53  
- **Vrais positifs (correctement détectés)** : 50  
- **Faux positifs** : 3  
- **Faux négatifs** : 0  

**Métriques de performance :**
- 🎯 **Précision** : 0.943  
- 📈 **Rappel** : 1.000  
- 📊 **F1-Score** : 0.971  

---

## 📌 Seuils de détection
- **Limite basse** : 59.1  
- **Limite haute** : 140.9  
- **Intervalle normal** : [59.1, 140.9]  

---

## ✅ Conclusion
La méthode **IQR** est simple et efficace pour détecter les valeurs aberrantes dans une distribution quasi normale.  
- Elle a permis d’identifier correctement toutes les anomalies réelles (rappel = 100 %).  
- Elle a légèrement sur-détecté (3 faux positifs).  
- Globalement, l’approche est **robuste et interprétable**.


